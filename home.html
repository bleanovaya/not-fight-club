<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fight.css">
    <link rel="stylesheet" href="./normalize.css">
    <link rel="apple-tuuch-icon" sizes="100x100" href="assets/favi/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favi/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favi/favicon-16x16.png">
    <link rel="manifest" href="assets/favi/site.webmanifest">
    <title>Fight Club</title>
</head>
<body>
    <header class="main-header">
  <nav class="nav-menu">
    <button class="nav-icon home-icon" title="Home">
        <img src="assets/home.svg">
    </button>
    <button class="nav-icon profile-icon" title="Profile">
        <img src="assets/profile.svg">
    </button>
    <button class="nav-icon settings-icon" title="Settings">
        <img src="assets/settings.svg">
    </button>
  </nav>
</header>
<main>
  <section class="home-screen screen active-screen">
    <h1 class="welcome-title">Welcome, <span id="player-name"></span>!</h1>
    <button id="start-fight-btn">Start the Fight!</button>
  </section>
   <section class="character-screen screen hidden-screen">
    <h2 class="avatar-title">Your Character</h2>
        <div class="character-card">
          <img id="avatar" src="" alt="selected avatar">
      <p><strong>Name:</strong> <span id="char-name"></span></p>
      <p><strong>Wins:</strong> <span id="wins">0</span></p>
      <p><strong>Losses:</strong> <span id="losses">0</span></p>
        </div>
       <div class="avatar-selection">
        <h3>Choose a Character</h3>
      <div class="avatar-list">
        <img src="assets/character/Character1.png" class="avatar-option" alt="Character 1">
        <img src="assets/character/character2.png" class="avatar-option" alt="Character 2">
        <img src="assets/character/character3.png" class="avatar-option" alt="Character 3">
        <img src="assets/character/character4.png" class="avatar-option" alt="Character 4">
        <img src="assets/character/character5.png" class="avatar-option" alt="Character 5">
      </div>
    </div>
  </section>
  <section class="settings-screen screen hidden-screen">
  <h2>Settings</h2>
  <div class="settings-card">
    <label for="new-name">Change your name:</label>
    <input type="text" id="new-name" placeholder="Enter new name" />
    <button id="save-name-btn">Save</button>
  </div>
</section>
<section id="fight-screen" class="fight-screen screen hidden-screen">
    <h2>Battle Arena</h2>
    <div class="arena-layout">
    <div id="player" class="character-cards">
      <h3>Player: <span id="player-fight-name"></span></h3>
      <img id="player-avatar" src="" alt="your character">
      <progress id="player-health" value="100" max="100"></progress>
    </div>  
   
    <div id="controls" class="zone-panel">
      <p>Attack zone:</p>
      <div class="attack-zones">
      <button class="zone attack" data-zone="head">Head</button>
      <button class="zone attack" data-zone="torso">Torso</button>
      <button class="zone attack" data-zone="arms">Arms</button>
      <button class="zone attack" data-zone="legs">Legs</button>
    </div>
    <p>Defense zones (2):</p>
    <div class="defense-zones">
    <button class="zone defense" data-zone="head">Head</button>
    <button class="zone defense" data-zone="torso">Torso</button>
    <button class="zone defense" data-zone="arms">Arms</button>
    <button class="zone defense" data-zone="legs">Legs</button>
  </div>
      <button id="attack-btn" disabled>Attack!</button>
    </div>
    <div id="enemy" class="character-cards">
      <h3>Enemy: <span id="enemy-name"></span></h3>
      <img id="enemy-avatar" src="" alt="Enemy character">
      <progress id="enemy-health" value="100" max="100"></progress>
    </div>
    </div>
   
    <ul id="battle-log"></ul>
  </section>
</main>
  <script>
    function showScreen(screenClass) {
  document.querySelectorAll('main section').forEach(sec => {
    sec.classList.add('hidden-screen');
    sec.classList.remove('active-screen');
  });
  const target = document.querySelector(`.${screenClass}`);
  if (target) {
    target.classList.remove('hidden-screen');
    target.classList.add('active-screen');
  }
}
    document.querySelector('.settings-icon')?.addEventListener('click', () => {
  showScreen('settings-screen');
});

document.getElementById('save-name-btn')?.addEventListener('click', () => {
  const newName = document.getElementById('new-name').value.trim();
  if (newName) {
    localStorage.setItem('playerName', newName);
    document.getElementById('player-name').textContent = newName;
    document.getElementById('char-name').textContent = newName;
    alert('Name updated!');
  }
});

    // Получаем имя игрока из localStorage
    const name = localStorage.getItem('playerName');
    document.getElementById('player-name').textContent = name || 'Игрок';

    // Переход к экрану боя
    document.getElementById('start-fight-btn').addEventListener('click', () => {
      const name = localStorage.getItem('playerName') || 'Player';
      const avatarSrc = localStorage.getItem('avatarSrc') || 'assets/character/Character1.png';
      const enemies = [
        { name: 'Voxnull', img:'assets/enemy/enemy1.png' },
        { name: 'Oktar', img:'assets/enemy/enemy2.png' },
        { name: 'Crimora', img:'assets/enemy/enemy3.png' }
      ];

      const random = enemies[Math.floor(Math.random() * enemies.length)];
      document.getElementById('enemy-avatar').src = random.img;
      document.getElementById('enemy-name').textContent = random.name;
      document.getElementById('player-avatar').src = avatarSrc;
      document.getElementById('player-fight-name').textContent = name;
      showScreen('fight-screen');
    });
  </script>
<script>
window.onload = () => {
  // Инициализация имени
  const name = localStorage.getItem('playerName') || 'Игрок';
  document.getElementById('player-name').textContent = name;
  document.getElementById('char-name').textContent = name;

  // Победы и поражения
  document.getElementById('wins').textContent = localStorage.getItem('wins') || 0;
  document.getElementById('losses').textContent = localStorage.getItem('losses') || 0;

  // Аватар
  const avatarSrc = localStorage.getItem('avatarSrc') || 'assets/character/Character1.png';
  document.getElementById('avatar').src = avatarSrc;

  // Смена аватара через загрузку
  const avatarUpload = document.getElementById('avatar-upload');
  if (avatarUpload) {
    avatarUpload.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          document.getElementById('avatar').src = reader.result;
          localStorage.setItem('avatarSrc', reader.result);
        };
        reader.readAsDataURL(file);
      }
    });
  }

  // Выбор аватара из предложенных
  const avatarOptions = document.querySelectorAll('.avatar-option');
  avatarOptions.forEach(img => {
    img.addEventListener('click', () => {
      avatarOptions.forEach(i => i.classList.remove('selected'));
      img.classList.add('selected');
      const src = img.getAttribute('src');
      document.getElementById('avatar').src = src;
      localStorage.setItem('avatarSrc', src);
    });
  });

  // Переключение экранов
  function showScreen(screenClass) {
    document.querySelectorAll('main section').forEach(sec => {
      sec.classList.add('hidden-screen');
      sec.classList.remove('active-screen');
    });
    const target = document.querySelector(`.${screenClass}`);
    if (target) {
      target.classList.remove('hidden-screen');
      target.classList.add('active-screen');
    }
  }

  // Навигация по иконкам
  document.querySelector('.home-icon')?.addEventListener('click', () => {
    showScreen('home-screen');
  });

  document.querySelector('.profile-icon')?.addEventListener('click', () => {
    showScreen('character-screen');
  });
  document.querySelector('.settings-icon')?.addEventListener('click', () => {
  showScreen('settings-screen');
});
let selectedAttack = null;
let selectedDefense = [];

document.querySelectorAll('.attack').forEach(btn => {
  btn.addEventListener('click', () => {
    selectedAttack = btn.dataset.zone;
    document.querySelectorAll('.attack').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    updateAttackButtonState();
  });
});

document.querySelectorAll('.defense').forEach(btn => {
  btn.addEventListener('click', () => {
    const zone = btn.dataset.zone;
    if (selectedDefense.includes(zone)) {
      selectedDefense = selectedDefense.filter(z => z !== zone);
      btn.classList.remove('selected');
    } else if (selectedDefense.length < 2) {
      selectedDefense.push(zone);
      btn.classList.add('selected');
    }
    updateAttackButtonState();
  });
});

function updateAttackButtonState() {
  document.getElementById('attack-btn').disabled = !(selectedAttack && selectedDefense.length === 2);
}

};
</script>

</body>
</html>